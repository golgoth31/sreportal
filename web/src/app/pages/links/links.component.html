<div class="links-container">
  <header class="links-header">
    <h1>DNS Links</h1>
    <p class="subtitle">Aggregated FQDNs organized by group</p>
  </header>

  <div class="controls">
    <div class="search-box">
      <input
        type="text"
        [value]="facade.searchTerm()"
        (input)="onSearch($event)"
        placeholder="Search FQDNs..."
        class="search-input"
        aria-label="Search FQDNs"
      />
    </div>

    <div class="filters">
      <select (change)="onGroupFilter($event)" class="group-select" aria-label="Filter by group">
        <option value="">All Groups</option>
        @for (group of facade.groups(); track group) {
          <option [value]="group">{{ group }}</option>
        }
      </select>

      @if (facade.searchTerm() || facade.groupFilter()) {
        <app-button variant="outline" size="sm" (click)="clearFilters()">
          Clear Filters
        </app-button>
      }
    </div>

    <div class="stats">
      <span>{{ facade.filteredCount() }} of {{ facade.totalCount() }} FQDNs</span>
    </div>
  </div>

  @if (facade.loading()) {
    <div class="loading" aria-live="polite">
      <div class="spinner"></div>
      <p>Loading FQDNs...</p>
    </div>
  }

  @if (facade.error()) {
    <div class="error" role="alert">
      <p>{{ facade.error() }}</p>
    </div>
  }

  @if (!facade.loading() && !facade.error()) {
    <div class="fqdn-list">
      @for (group of facade.groupedByGroup(); track group.name) {
        <app-fqdn-group [group]="group" />
      }

      @if (facade.filteredCount() === 0) {
        <div class="empty-state">
          <p>No FQDNs found</p>
          @if (facade.searchTerm() || facade.groupFilter()) {
            <app-button variant="outline" size="sm" (click)="clearFilters()">
              Clear Filters
            </app-button>
          }
        </div>
      }
    </div>
  }
</div>
